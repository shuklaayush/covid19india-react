{"version":3,"sources":["../node_modules/fast-deep-equal/index.js","../node_modules/d3-array/src/min.js","components/loaders/Timeseries.js","components/TimeseriesExplorer.js"],"names":["module","exports","equal","a","b","constructor","length","i","keys","Array","isArray","RegExp","source","flags","valueOf","Object","prototype","toString","hasOwnProperty","call","key","min","values","valueof","undefined","value","index","TimeseriesLoader","windowWidth","window","innerWidth","width","height","viewBox","speed","cx","cy","r","Timeseries","lazy","retry","TimeseriesBrush","TimeseriesExplorer","stateCode","timeseries","timelineDate","date","regionHighlighted","setRegionHighlighted","anchor","setAnchor","expandTable","hideVaccinated","t","useTranslation","useLocalStorage","lookback","setLookback","chartType","setChartType","isUniform","setIsUniform","isLog","setIsLog","isMovingAverage","setIsMovingAverage","stateCodeDateRange","dates","beginningDate","getIndiaDateYesterdayISO","endDate","useState","brushSelectionEnd","setBrushSelectionEnd","useEffect","brushSelectionStart","formatISO","subDays","parseIndiaDate","representation","explorerElement","useRef","isVisible","useIsVisible","once","useWindowSize","selectedRegion","useMemo","districts","districtName","selectedTimeseries","regions","states","filter","code","sort","code1","code2","STATE_NAMES","localeCompare","map","reduce","acc1","acc2","dropdownRegions","find","region","brushSelectionDates","handleChange","useCallback","target","JSON","parse","resetDropdown","statistics","TIMESERIES_STATISTICS","statistic","STATISTIC_CONFIGS","category","className","classnames","stickied","expanded","style","display","ref","onClick","bind","this","entries","TIMESERIES_CHART_TYPES","ctype","htmlFor","id","type","checked","aria-label","onChange","disabled","stringify","fallback","currentBrushSelection","animationIndex","animationDelay","TIMESERIES_LOOKBACK_DAYS","numDays","selected","isEqual","prevProps","currProps","forceRender","memo"],"mappings":"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","file":"static/js/29.82f77d12.chunk.js","sourcesContent":["'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","export default function min(values, valueof) {\n  let min;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  }\n  return min;\n}\n","import ContentLoader from 'react-content-loader';\n\nconst TimeseriesLoader = () => {\n  const windowWidth = window.innerWidth;\n  const width = windowWidth >= 769 ? 480 : windowWidth;\n  const height = 200 * 6;\n\n  return (\n    <ContentLoader\n      viewBox={`0 0 ${width} ${height}`}\n      height={height}\n      width={width}\n      speed={2}\n    >\n      <circle cx={0.4 * width} cy={height / 2} r=\"5\" />\n      <circle cx={0.5 * width} cy={height / 2} r=\"5\" />\n      <circle cx={0.6 * width} cy={height / 2} r=\"5\" />\n    </ContentLoader>\n  );\n};\n\nexport default TimeseriesLoader;\n","import TimeseriesLoader from './loaders/Timeseries';\n\nimport {\n  STATE_NAMES,\n  STATISTIC_CONFIGS,\n  TIMESERIES_CHART_TYPES,\n  TIMESERIES_LOOKBACK_DAYS,\n  TIMESERIES_STATISTICS,\n} from '../constants';\nimport useIsVisible from '../hooks/useIsVisible';\nimport {\n  getIndiaDateYesterdayISO,\n  parseIndiaDate,\n  retry,\n} from '../utils/commonFunctions';\n\nimport {PinIcon, ReplyIcon} from '@primer/octicons-react';\nimport classnames from 'classnames';\nimport {min} from 'd3-array';\nimport {formatISO, subDays} from 'date-fns';\nimport equal from 'fast-deep-equal';\nimport {\n  memo,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n  lazy,\n  Suspense,\n} from 'react';\nimport {useTranslation} from 'react-i18next';\nimport {useLocalStorage, useWindowSize} from 'react-use';\n\nconst Timeseries = lazy(() => retry(() => import('./Timeseries')));\nconst TimeseriesBrush = lazy(() => retry(() => import('./TimeseriesBrush')));\n\nfunction TimeseriesExplorer({\n  stateCode,\n  timeseries,\n  date: timelineDate,\n  regionHighlighted,\n  setRegionHighlighted,\n  anchor,\n  setAnchor,\n  expandTable = false,\n  hideVaccinated = false,\n}) {\n  const {t} = useTranslation();\n  const [lookback, setLookback] = useLocalStorage('timeseriesLookbackDays', 90);\n  const [chartType, setChartType] = useLocalStorage('chartType', 'delta');\n  const [isUniform, setIsUniform] = useLocalStorage('isUniform', false);\n  const [isLog, setIsLog] = useLocalStorage('isLog', false);\n  const [isMovingAverage, setIsMovingAverage] = useLocalStorage(\n    'isMovingAverage',\n    false\n  );\n\n  const stateCodeDateRange = Object.keys(timeseries?.[stateCode]?.dates || {});\n  const beginningDate =\n    stateCodeDateRange[0] || timelineDate || getIndiaDateYesterdayISO();\n  const endDate = min([\n    stateCodeDateRange[stateCodeDateRange.length - 1],\n    timelineDate || getIndiaDateYesterdayISO(),\n  ]);\n\n  const [brushSelectionEnd, setBrushSelectionEnd] = useState(endDate);\n  useEffect(() => {\n    setBrushSelectionEnd(endDate);\n  }, [endDate]);\n\n  const brushSelectionStart =\n    lookback !== null\n      ? formatISO(subDays(parseIndiaDate(brushSelectionEnd), lookback), {\n          representation: 'date',\n        })\n      : beginningDate;\n\n  const explorerElement = useRef();\n  const isVisible = useIsVisible(explorerElement, {once: true});\n  const {width} = useWindowSize();\n\n  const selectedRegion = useMemo(() => {\n    if (timeseries?.[regionHighlighted.stateCode]?.districts) {\n      return {\n        stateCode: regionHighlighted.stateCode,\n        districtName: regionHighlighted.districtName,\n      };\n    } else {\n      return {\n        stateCode: regionHighlighted.stateCode,\n        districtName: null,\n      };\n    }\n  }, [timeseries, regionHighlighted.stateCode, regionHighlighted.districtName]);\n\n  const selectedTimeseries = useMemo(() => {\n    if (selectedRegion.districtName) {\n      return timeseries?.[selectedRegion.stateCode]?.districts?.[\n        selectedRegion.districtName\n      ]?.dates;\n    } else {\n      return timeseries?.[selectedRegion.stateCode]?.dates;\n    }\n  }, [timeseries, selectedRegion.stateCode, selectedRegion.districtName]);\n\n  const regions = useMemo(() => {\n    const states = Object.keys(timeseries || {})\n      .filter((code) => code !== stateCode)\n      .sort((code1, code2) =>\n        STATE_NAMES[code1].localeCompare(STATE_NAMES[code2])\n      )\n      .map((code) => {\n        return {\n          stateCode: code,\n          districtName: null,\n        };\n      });\n    const districts = Object.keys(timeseries || {}).reduce((acc1, code) => {\n      return [\n        ...acc1,\n        ...Object.keys(timeseries?.[code]?.districts || {}).reduce(\n          (acc2, districtName) => {\n            return [\n              ...acc2,\n              {\n                stateCode: code,\n                districtName: districtName,\n              },\n            ];\n          },\n          []\n        ),\n      ];\n    }, []);\n\n    return [\n      {\n        stateCode: stateCode,\n        districtName: null,\n      },\n      ...states,\n      ...districts,\n    ];\n  }, [timeseries, stateCode]);\n\n  const dropdownRegions = useMemo(() => {\n    if (\n      regions.find(\n        (region) =>\n          region.stateCode === regionHighlighted.stateCode &&\n          region.districtName === regionHighlighted.districtName\n      )\n    )\n      return regions;\n    return [\n      ...regions,\n      {\n        stateCode: regionHighlighted.stateCode,\n        districtName: regionHighlighted.districtName,\n      },\n    ];\n  }, [regionHighlighted.stateCode, regionHighlighted.districtName, regions]);\n\n  const dates = useMemo(\n    () =>\n      Object.keys(selectedTimeseries || {}).filter((date) => date <= endDate),\n    [selectedTimeseries, endDate]\n  );\n\n  const brushSelectionDates = useMemo(\n    () =>\n      dates.filter(\n        (date) => brushSelectionStart <= date && date <= brushSelectionEnd\n      ),\n    [dates, brushSelectionStart, brushSelectionEnd]\n  );\n\n  const handleChange = useCallback(\n    ({target}) => {\n      setRegionHighlighted(JSON.parse(target.value));\n    },\n    [setRegionHighlighted]\n  );\n\n  const resetDropdown = useCallback(() => {\n    setRegionHighlighted({\n      stateCode: stateCode,\n      districtName: null,\n    });\n  }, [stateCode, setRegionHighlighted]);\n\n  const statistics = useMemo(\n    () =>\n      TIMESERIES_STATISTICS.filter(\n        (statistic) =>\n          (!(STATISTIC_CONFIGS[statistic]?.category === 'vaccinated') ||\n            !hideVaccinated) &&\n          // (chartType === 'total' || statistic !== 'active') &&\n          (chartType === 'delta' || statistic !== 'tpr')\n      ),\n    [chartType, hideVaccinated]\n  );\n\n  return (\n    <div\n      className={classnames(\n        'TimeseriesExplorer fadeInUp',\n        {\n          stickied: anchor === 'timeseries',\n        },\n        {expanded: expandTable}\n      )}\n      style={{\n        display:\n          anchor && anchor !== 'timeseries' && (!expandTable || width < 769)\n            ? 'none'\n            : '',\n      }}\n      ref={explorerElement}\n    >\n      <div className=\"timeseries-header\">\n        <div\n          className={classnames('anchor', 'fadeInUp', {\n            stickied: anchor === 'timeseries',\n          })}\n          style={{\n            display: expandTable && width >= 769 ? 'none' : '',\n          }}\n          onClick={\n            setAnchor &&\n            setAnchor.bind(this, anchor === 'timeseries' ? null : 'timeseries')\n          }\n        >\n          <PinIcon />\n        </div>\n\n        <h1>{t('Spread Trends')}</h1>\n        <div className=\"tabs\">\n          {Object.entries(TIMESERIES_CHART_TYPES).map(\n            ([ctype, value], index) => (\n              <div\n                className={`tab ${chartType === ctype ? 'focused' : ''}`}\n                key={ctype}\n                onClick={setChartType.bind(this, ctype)}\n              >\n                <h4>{t(value)}</h4>\n              </div>\n            )\n          )}\n        </div>\n\n        <div className=\"timeseries-options\">\n          <div className=\"scale-modes\">\n            <label className=\"main\">{`${t('Scale Modes')}:`}</label>\n            <div className=\"timeseries-mode\">\n              <label htmlFor=\"timeseries-mode\">{t('Uniform')}</label>\n              <input\n                id=\"timeseries-mode\"\n                type=\"checkbox\"\n                className=\"switch\"\n                checked={isUniform}\n                aria-label={t('Checked by default to scale uniformly.')}\n                onChange={setIsUniform.bind(this, !isUniform)}\n              />\n            </div>\n            <div\n              className={`timeseries-mode ${\n                chartType !== 'total' ? 'disabled' : ''\n              }`}\n            >\n              <label htmlFor=\"timeseries-logmode\">{t('Logarithmic')}</label>\n              <input\n                id=\"timeseries-logmode\"\n                type=\"checkbox\"\n                checked={chartType === 'total' && isLog}\n                className=\"switch\"\n                disabled={chartType !== 'total'}\n                onChange={setIsLog.bind(this, !isLog)}\n              />\n            </div>\n          </div>\n\n          <div\n            className={`timeseries-mode ${\n              chartType === 'total' ? 'disabled' : ''\n            } moving-average`}\n          >\n            <label htmlFor=\"timeseries-moving-average\">\n              {t('7 day Moving Average')}\n            </label>\n            <input\n              id=\"timeseries-moving-average\"\n              type=\"checkbox\"\n              checked={chartType === 'delta' && isMovingAverage}\n              className=\"switch\"\n              disabled={chartType !== 'delta'}\n              onChange={setIsMovingAverage.bind(this, !isMovingAverage)}\n            />\n          </div>\n        </div>\n      </div>\n      {dropdownRegions && (\n        <div className=\"state-selection\">\n          <div className=\"dropdown\">\n            <select\n              value={JSON.stringify(selectedRegion)}\n              onChange={handleChange}\n            >\n              {dropdownRegions\n                .filter(\n                  (region) =>\n                    STATE_NAMES[region.stateCode] !== region.districtName\n                )\n                .map((region) => {\n                  return (\n                    <option\n                      value={JSON.stringify(region)}\n                      key={`${region.stateCode}-${region.districtName}`}\n                    >\n                      {region.districtName\n                        ? t(region.districtName)\n                        : t(STATE_NAMES[region.stateCode])}\n                    </option>\n                  );\n                })}\n            </select>\n          </div>\n          <div className=\"reset-icon\" onClick={resetDropdown}>\n            <ReplyIcon />\n          </div>\n        </div>\n      )}\n      {isVisible && (\n        <Suspense fallback={<TimeseriesLoader />}>\n          <Timeseries\n            timeseries={selectedTimeseries}\n            regionHighlighted={selectedRegion}\n            dates={brushSelectionDates}\n            {...{\n              statistics,\n              endDate,\n              chartType,\n              isUniform,\n              isLog,\n              isMovingAverage,\n            }}\n          />\n          <TimeseriesBrush\n            timeseries={selectedTimeseries}\n            regionHighlighted={selectedRegion}\n            currentBrushSelection={[brushSelectionStart, brushSelectionEnd]}\n            animationIndex={statistics.length}\n            {...{dates, endDate, lookback, setBrushSelectionEnd, setLookback}}\n          />\n        </Suspense>\n      )}\n      {!isVisible && <div style={{height: '50rem'}} />}\n      <div\n        className=\"pills fadeInUp\"\n        style={{animationDelay: `${(1 + statistics.length) * 250}ms`}}\n      >\n        {TIMESERIES_LOOKBACK_DAYS.map((numDays) => (\n          <button\n            key={numDays}\n            type=\"button\"\n            className={classnames({\n              selected: numDays === lookback,\n            })}\n            onClick={setLookback.bind(this, numDays)}\n          >\n            {numDays !== null ? `${numDays} ${t('days')}` : t('Beginning')}\n          </button>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nconst isEqual = (prevProps, currProps) => {\n  if (currProps.forceRender) {\n    return false;\n  } else if (!currProps.timeseries && prevProps.timeseries) {\n    return true;\n  } else if (currProps.timeseries && !prevProps.timeseries) {\n    return false;\n  } else if (\n    !equal(\n      currProps.regionHighlighted.stateCode,\n      prevProps.regionHighlighted.stateCode\n    )\n  ) {\n    return false;\n  } else if (\n    !equal(\n      currProps.regionHighlighted.districtName,\n      prevProps.regionHighlighted.districtName\n    )\n  ) {\n    return false;\n  } else if (!equal(currProps.date, prevProps.date)) {\n    return false;\n  } else if (!equal(currProps.anchor, prevProps.anchor)) {\n    return false;\n  } else if (!equal(currProps.expandTable, prevProps.expandTable)) {\n    return false;\n  } else if (!equal(currProps.hideVaccinated, prevProps.hideVaccinated)) {\n    return false;\n  }\n  return true;\n};\n\nexport default memo(TimeseriesExplorer, isEqual);\n"],"sourceRoot":""}